define("http://static.winxuancdn.com/libs/core/ui.js",["jQuery","widgets-css"],function(a){function e(a){if(window==this)return new e(a);this.defCfg={callback:function(){},cancel:function(){},width:200,height:"auto",title:"",message:"",buttons:{ok:"确认",cancel:"取消"},isOverlay:!1,dock:null},this.init(a)}function f(a){if(window==this)return new f(a);this.defCfg={overlay:!0,el:null},this.init(a)}function g(a){if(window==this)return new g(a);this.opt={isAjax:!0,title:"提示",dock:null,loadingText:"正在加载...请稍后",button:c.cartButton,callback:function(){throw new Error("TODO add tip action")}},b.extend(this.opt,a),this.init()}var b=a("jQuery");a("widgets-css");var c={confirm:'<div class="ui:confirm"><div class="ui:wrap"><div class="ui:title"><label></label><b>X</b></div><div class="ui:content"><p></p></div><div class="ui:button"><button name="ok" class="button:ok">确认</button><button name="cancel" class="button:cancel">取消</button></div></div></div>',overlay:'<div class="ui:overlay"><iframe></iframe></div>',highlight:'<div class="ui:highlight"></div>',loading:'<div class="ui:loading"></div>',cartButton:'<div class="ui:button"><button class="button:gotoCart">去购物车并结算</button><button class="button:continue">继续购物&gt;&gt;</button></div>',tip:'<div class="ui:tip"><div class="ui:wrap"><div class="ui:title"><label></label><b>X</b></div><div class="ui:content">aa</div></div></div>'},d={locate:function(a,b,c){if(!!b&&b.length>0){var e=b.offset(),f=e.top-b.height()-a.height(),g=e.left-a.width()/2+b.width()/2;f=f<0?0:f,g=g<0?0:g,a.css({top:f,left:g})}else d.center(a)},position:function(a,b,c){var d=c||"above",e=b.offset(),f,g;d=="above"&&(f=e.top-b.height()-a.height(),g=e.left-a.width()/2+b.width()/2,f=f<0?0:f,g=g<0?0:g),a.css({top:f,left:g})},center:function(a){var c=b(window).height()/2-a.height()/2+b(document).scrollTop(),d=b(window).width()/2-a.width()/2;c=c<0?0:c,d=d<0?0:d,a.css({top:c,left:d})},fullScreen:function(a){var c=b(document).height(),d=b(window).width(),e=b(window).height(),f=a.find("iframe");c<e?(a.css({height:e,width:d}),f.css({height:e,width:d})):(a.css({height:c,width:d}),f.css({height:c,width:d}))}};return e.prototype={init:function(a){typeof a=="string"?this.defCfg.message=a:b.extend(this.defCfg,a),this.show(this.defCfg)},show:function(a){this.el=b(c.confirm),this.el.find(".ui\\:title label").html(a.title),this.el.find(".ui\\:content p").html(a.message),this.initButton(),this.el.find(".ui\\:wrap").css({width:a.width,height:a.height}),this.el.appendTo(document.body),a.isOverlay&&(this.overlay=b(c.overlay),this.overlay.css({width:b(document).width(),height:b(document).height()}),this.overlay.appendTo(document.body)),d.locate(this.el,b(a.dock)),this.bind()},initButton:function(){var a=this.defCfg.buttons;a.ok?this.el.find("button[name='ok']").html(a.ok):this.el.find("button[name='ok']").remove(),a.cancel?this.el.find("button[name='cancel']").html(a.cancel):this.el.find("button[name='cancel']").remove()},bind:function(){var a=this;this.el.find("button[name='ok']").click(function(){a.submit()}),this.el.find("button[name='cancel']").click(function(){a.close()}),this.el.find(".ui\\:title b").click(function(){a.close()})},submit:function(){this.close(),this.defCfg.callback()},close:function(){this.el.remove(),this.overlay&&this.overlay.remove()}},f.prototype={init:function(a){this.cfg=b.extend(this.defCfg,a);if(!!this.cfg.el){this.cfg.overlay&&(this.overlay=b(c.overlay),d.fullScreen(this.overlay),this.overlay.hide(),this.overlay.appendTo(document.body)),this.el=b(c.highlight);var e=this.cfg.el;e.css({margin:0,padding:0}),e.appendTo(this.el),this.el.hide(),this.el.appendTo(document.body),this.show()}},show:function(){this.overlay&&(d.fullScreen(this.overlay),this.overlay.show()),d.center(this.el),this.el.show()},close:function(){this.overlay&&this.overlay.hide(),this.el.hide()},remove:function(){this.overlay.remove(),this.el.remove()}},g.prototype={init:function(){this.el=b(c.tip),this.title=this.el.find("div.ui\\:title"),this.content=this.el.find("div.ui\\:content"),this.title.find("label").html(this.opt.title),this.el.find(".ui\\:wrap").css({width:this.opt.width,height:this.opt.height}),this.opt.isAjax&&this.content.html("<div class='ui:loading'>"+this.opt.loadingText+"</div>"),this.el.appendTo(document.body),d.locate(this.el,b(this.opt.dock)),this.bind()},bind:function(){var a=this;this.title.find("b").click(function(){a.close()})},change:function(a,c){var e=this;a=="success"?(this.content.html("<div class='ui:msg'>"+c+"</div>"),this.button?this.button.show():(this.button=b(this.opt.button),this.button.find("button.button\\:gotoCart").click(function(){e.opt.callback()}),this.button.find("button.button\\:continue").click(function(){e.close()}),this.button.appendTo(this.el.find("div.ui\\:wrap")))):a=="error"?this.content.html("<div class='ui:error'>"+c+"</div>"):a=="loading"&&(this.content.html("<div class='ui:loading'>"+this.opt.loadingText+"</div>"),this.button&&this.button.hide()),d.locate(this.el,b(this.opt.dock))},close:function(){this.el.remove(),this.hasClosed=!0}},{confirm:function(a){return e(a)},highlight:function(a){return f(a)},tipWindow:function(a){return g(a)}}});