define("http://static.winxuancdn.com/libs/core/address.js",["jQuery","ui","config"],function(a){var b=a("jQuery"),c=a("ui"),d=a("config"),e=d.portalServer+"/customer/address",f={ADD_OR_UPDATE_EVENT:"add_or_update_event",DELETE_EVENT:"delete_event",DEFAULT_USUAL_EVENT:"default_usual_event",getAddress:function(a,c){b.ajax({type:"GET",url:e+"/"+a,data:"format=json",success:function(a){var b=a.address;c.consignee.val(b.consignee),c.country.val(b.country.id),c.country.trigger("change"),b.country.id==23&&(c.province.val(b.province.id),c.province.trigger("change"),c.city.val(b.city.id),c.city.trigger("change"),c.district.val(b.district.id),c.district.trigger("change")),c.address.val(b.address),c.zipCode.val(b.zipCode),c.mobile.val(b.mobile),c.phone.val(b.phone),c.email.val(b.email),b.usual&&c.usual.attr("checked","checked")}})},defaultUsual:function(a){b.ajax({type:"POST",url:e+"/usual",data:"id="+a+"&format=json&_method=put",success:function(c){c.id=a,b(f).trigger(f.DEFAULT_USUAL_EVENT,[c])}})},deleteAddress:function(a,d){c.confirm({message:"您确定要移除此条数据？",dock:a,callback:function(){b.ajax({type:"POST",url:e+"/"+d,data:"format=json&_method=delete",success:function(a){a.id=d,b(f).trigger(f.DELETE_EVENT,[a])}})}})},saveOrUpadteAddress:function(a,c,d){c.find("input").attr("disabled","disabled"),c.find("select").attr("disabled","disabled");var g="";g+="consignee="+d.consignee,g+="&country.id="+d.country,g+="&province.id="+d.province,g+="&city.id="+d.city,g+="&district.id="+d.district,g+="&address="+d.address,g+="&zipCode="+d.zipCode,g+="&mobile="+d.mobile,g+="&phone="+d.phone,g+="&email="+d.email,d.usual?d.usual=1:d.usual=0,g+="&usual="+d.usual;if(a=="save")b.ajax({type:"POST",url:e,data:g+"&format=json",success:function(a){b(f).trigger(f.ADD_OR_UPDATE_EVENT,[a])}});else if(a=="update"){var h=c.attr("addressId");g+="&id="+h,b.ajax({type:"POST",url:e,data:g+"&format=json&_method=put",success:function(a){b(f).trigger(f.ADD_OR_UPDATE_EVENT,[a])}})}}};return f});