define("http://static.winxuancdn.com/libs/widgets/roller.js",["jQuery"],function(a){function c(a){if(window==this)return new c(a);this.opt={context:b(document),itemSize:4,page:2,paging:!1,auto:!1,selector:{container:"",box:"",items:"",prev:"",next:""}},b.extend(this.opt,a),this.init()}var b=a("jQuery");return c.prototype={init:function(){if(!this.opt.context)throw new Error("Can't found roller's context ");this.el=this.opt.context.find(this.opt.selector.container),this.box=this.el.find(this.opt.selector.box),this.items=this.box.find(this.opt.selector.item),this.opt.paging&&(this.page=this.opt.context.find(this.opt.selector.page)),this.nextEl=this.el.find(this.opt.selector.next),this.prevEl=this.el.find(this.opt.selector.prev),this.items=this.box.find(this.opt.selector.items),this.itemWidth=this.items.innerWidth(),this.box.css({width:this.itemWidth*this.items.length}),this.pageIndex=1,this.bind(),this.auto()},bind:function(){var a=this;this.el.delegate(this.opt.selector.next,"click",function(){a.next()}),this.el.delegate(this.opt.selector.prev,"click",function(){a.prev()}),!this.opt.paging,this.box.hover(function(){a.isHover=!0},function(){a.isHover=!1}),this.opt.context.bind("refresh",function(){a.reload()})},reload:function(){this.box=this.el.find(this.opt.selector.box)},refresh:function(){var a=this;a.locking||(a.locking=!0,a.box.animate({marginLeft:-(a.pageIndex-1)*a.itemWidth*a.opt.itemSize},500,function(){a.locking=!1;if(a.opt.paging){var b=a.page.filter(":contains("+a.pageIndex+")"),c=a.opt.className.pageSelected;a.page.removeClass(c),b.addClass(c)}if(!a.box.data("loaded")){var d=a.box.find("img[data-original][loaded!=true]");d.length>0?(d.trigger("scroll"),d.trigger("imgload")):a.box.data("loaded",!0)}}))},next:function(){this.index(1),this.refresh()},prev:function(){this.index(-1),this.refresh()},pageGo:function(a){this.index(a),this.refresh()},index:function(a){if(this.locking)return;a==+1?this.pageIndex>=this.opt.page?this.pageIndex=1:this.pageIndex++:a==-1?this.pageIndex<=1?this.pageIndex=this.opt.page:this.pageIndex--:this.pageIndex=parseInt(a)},auto:function(){var a=this;this.opt.auto&&setInterval(function(){a.isHover||a.next()},1e4)}},c});